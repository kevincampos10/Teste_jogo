<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Desvio de Carro</title>
    <style>
        body { text-align: center; background: #333; color: white; font-family: sans-serif; overflow: hidden; }
        canvas { background: #555; border: 4px solid #fff; display: block; margin: 20px auto; }
        .info { font-size: 1.2em; }
    </style>
</head>
<body>

    <h1>Jogo de Carrinho</h1>
    <p class="info">Use as <b>Setas (Esquerda/Direita)</b> para desviar!</p>
    <canvas id="gameCanvas" width="400" height="500"></canvas>
    <div id="scoreDisplay">Pontuação: 0</div>

    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        const scoreDisplay = document.getElementById("scoreDisplay");

        let carWidth = 40;
        let carHeight = 70;
        let carX = canvas.width / 2 - carWidth / 2;
        let carY = canvas.height - 100;
        let carSpeed = 7;

        let obstacleWidth = 40;
        let obstacleHeight = 70;
        let obstacleX = Math.random() * (canvas.width - obstacleWidth);
        let obstacleY = -100;
        let obstacleSpeed = 4;

        let score = 0;
        let gameOver = false;
        let keys = {};

        // Detectar teclas
        window.addEventListener("keydown", (e) => keys[e.code] = true);
        window.addEventListener("keyup", (e) => keys[e.code] = false);

        function update() {
            if (gameOver) return;

            // Movimentação do jogador
            if (keys["ArrowLeft"] && carX > 0) carX -= carSpeed;
            if (keys["ArrowRight"] && carX < canvas.width - carWidth) carX += carSpeed;

            // Movimentação do obstáculo
            obstacleY += obstacleSpeed;

            // Resetar obstáculo quando sai da tela
            if (obstacleY > canvas.height) {
                obstacleY = -100;
                obstacleX = Math.random() * (canvas.width - obstacleWidth);
                score++;
                obstacleSpeed += 0.2; // Aumenta a dificuldade
                scoreDisplay.innerText = "Pontuação: " + score;
            }

            // Colisão
            if (carX < obstacleX + obstacleWidth &&
                carX + carWidth > obstacleX &&
                carY < obstacleY + obstacleHeight &&
                carY + carHeight > obstacleY) {
                gameOver = true;
                alert("Game Over! Pontuação final: " + score);
                location.reload(); // Reinicia o jogo
            }
        }

        function draw() {
            // Limpar tela
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Desenhar Estrada (faixas)
            ctx.strokeStyle = "white";
            ctx.setLineDash([20, 20]);
            ctx.beginPath();
            ctx.moveTo(canvas.width / 2, 0);
            ctx.lineTo(canvas.width / 2, canvas.height);
            ctx.stroke();

            // Desenhar Jogador (Carro Azul)
            ctx.fillStyle = "#3498db";
            ctx.fillRect(carX, carY, carWidth, carHeight);
            
            // Detalhe simples do carro (janela)
            ctx.fillStyle = "#fff";
            ctx.fillRect(carX + 5, carY + 10, carWidth - 10, 15);

            // Desenhar Obstáculo (Carro Vermelho)
            ctx.fillStyle = "#e74c3c";
            ctx.fillRect(obstacleX, obstacleY, obstacleWidth, obstacleHeight);
        }

        function loop() {
            update();
            draw();
            requestAnimationFrame(loop);
        }

        loop();
    </script>
</body>
</html>
